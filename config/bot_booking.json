{
	"botName": "mybot",
	"intents": [{
			"patterns": ["I want to book a cab", "book my cab", "get me taxi", "book a car"],
			"journeyName": "bookcab",
			"inputMapping": {
				"data": "message",
				"channel": "cabbookchannel",
				"user": "Sidd"
			}
		},
		{
			"patterns": ["I want to book a hotel", "book my hotel"],
			"journeyName": "bookhotel",
			"inputMapping": {
				"data": "message",
				"channel": "hostelbookchannel",
				"user": "Sidd"
			}
		}
	],
	"journey": [{
			"journeyName": "bookcab",
			"blocks": [{
					"blockSeq": 1,
					"blockName": "entry_msg",
					"type": "output",
					"getVariables": [],
					"inputMapping": {},
					"rules": [],
					"api": {
						"apiType": "GET",
						"endpoint": "http://127.0.0.1:2020/testapi/cities",
						"params": [{
							"key": "country",
							"value": "india"
						}],
						"dataMapping": {},
						"outputMapping": [
							{
								"map": {"name": "out1", "path": ["country","name"], "outputFormat": "item"}
							},
							{
								"map": {"name": "out2", "path": ["country","states","cities"], "outputFormat": "jsonarray", "outputTag": "value"}
							},
							{
								"map": {"name": "out3", "path": ["country","states","name"], "outputFormat": "arrayitem"}
							},
							{
								"map": {"name": "out4", "path": ["country","states","county","name"], "outputFormat": "arrayitem"}
							},
							{
								"map": {"name": "out5", "path": ["continent"], "outputFormat": "item"}
							},
							{
								"map": {"name": "out6", "path": ["country", "states", "ward", "no"], "outputFormat": "arrayitem"}
							}
						]
					},
					"output": {
						"message": {
							"messageId": "m1",
							"messageText": "Please select city",
							"messageType": "plaintext",
							"attachments":[
								{
									"attachmentId": "a1",
									"atachmentSeq": 1,
									"attachmentDesc": "Cities",
									"attachmentType": "dropdown",
									"options": ["@out2@"]
					
								}
							]
						}
					},
					"setVariables": [],
					"next": [{
						"journeyName": "bookcab",
						"blockName": "getdate"
					}]
				},
				{
					"blockSeq": 2,
					"blockName": "getdate",
					"type": "input",
					"getVariables": [],
					"inputMapping": [
						{"map": {"name": "city", "path": ["attachments", "optionsSelected"], "outputFormat": "item"}}
					],
					"rules": [],
					"api": {
						"apiType": "",
						"endpoint": "",
						"params": [{
							"key": "",
							"value": ""
						}],
						"dataMapping": {},
						"outputMapping": {}
					},
					"output": {
						"message":{
							"messageId": "m2",
							"messageText": "Please Select the Date",
							"messageType": "plaintext",
							"attachments": [{
									"attachmentId": "a2",
									"atachmentSeq": 1,
									"attachmentDesc": "Date Selection",
									"attachmentType": "datepicker",
									"options": []
								}]
						}
					},
					"setVariables": [{
						"variableName": "cityName",
						"value": "#city#",
						"scope": "global"
					}],
					"next": [{
						"journeyName": "bookcab",
						"blockName": "checkdetails"
					}]
				},
				{
					"blockSeq": 3,
					"blockName": "checkdetails",
					"type": "input",
					"getVariables": ["cityName"],
					"inputMapping": [{"map": {"name": "date", "path": ["attachments", "optionsSelected"], "outputFormat": "item"}}],
					"rules": [],
					"api": {
						"apiType": "",
						"endpoint": "",
						"params": [{
							"key": "",
							"value": ""
						}],
						"dataMapping": {},
						"outputMapping": {}
					},
					"output": {
						"message":{
							"messageId": "m3",
							"messageText": "You selected %cityName% as city and #date# as date. To confirm booking press Yes else No",
							"messageType": "plaintext",
							"attachments": [{
									"attachmentId": "a3",
									"atachmentSeq": 1,
									"attachmentDesc": "Confirm Selection",
									"attachmentType": "button",
									"options": [{"value": "Yes"}, {"value": "No"}]
								}]
						}
					},
					"setVariables": [{
						"variableName": "date",
						"value": "#date#",
						"scope": "local"}],
					"next": [{
						"journeyName": "bookcab",
						"blockName": "confirmbooking"
					}]
				},
				{
					"blockSeq": 4,
					"blockName": "confirmbooking",
					"type": "input",
					"getVariables": ["cityName", "date"],
					"inputMapping": [{"map": {"name": "selection", "path": ["attachments", "optionsSelected"], "outputFormat": "item"}}],
					"rules": {
						"oneOf":[{"#selection#":"Yes"}]
					},
					"api": {
						"apiType": "",
						"endpoint": "",
						"params": [{
							"key": "",
							"value": ""
						}],
						"dataMapping": {},
						"outputMapping": {}
					},
					"output": {
						"message":{
							"messageId": "m4",
							"messageText": "Thanks, your booking confirmation id is 123",
							"messageType": "plaintext",
							"attachments": [{
									"attachmentId": null,
									"atachmentSeq": null,
									"attachmentDesc": null,
									"attachmentType": null,
									"options": []
								}]
						}
					},
					"setVariables": [],
					"next": []
				}
			]
		},
		{
			"journeyName": "bookhotel",
			"blocks": [{
					"blockSeq": 1,
					"blockName": "entry_msg",
					"type": "output",
					"getVariables": [],
					"inputMapping": {},
					"rules": [],
					"api": {
						"apiType": "GET",
						"endpoint": "/getcities",
						"params": [{
							"key": "country",
							"value": "india"
						}],
						"dataMapping": {},
						"outputMapping": {
							"attachment": "response.text",
							"status": "response.status",
							"confirmationId": "response.text[confirmationId]"
						}
					},
					"output": {
						"message": "Sure,Please provide the city",
						"messageType": "dropdown",
						"attachemnt": "attachment",
						"channel": "cabbookchannel",
						"user": "Sidd"
					},
					"setVariables": [{
						"entity": null,
						"scope": "global/local",
						"variables": [{
							"variableName": null,
							"value": null,
							"scope": "global/local"
						}]

					}],
					"next": [{
						"journeyName": "bookhotel",
						"blockName": "getdate"
					}]
				},
				{
					"blockSeq": 2,
					"blockName": "getdate",
					"type": "input",
					"getVariables": [],
					"inputMapping": {
						"data": "attachment[options]",
						"channel": "cabbookchannel",
						"user": "Sidd"
					},
					"rules": [],
					"api": {
						"apiType": "",
						"endpoint": "",
						"params": [{
							"key": "",
							"value": ""
						}],
						"dataMapping": {},
						"outputMapping": {
							"attachment": ""
						}
					},
					"output": {
						"message": "Please Select the Date",
						"messageType": "dateTimePicker()",
						"attachemnt": "",
						"channel": "cabbookchannel",
						"user": "Sidd"
					},
					"setVariables": [{
						"entity": "city",
						"scope": "global",
						"variables": [{
							"variableName": "cityName",
							"value": "data",
							"scope": "global"
						}]
					}],
					"next": [{
						"journeyName": "bookhotel",
						"blockName": "confirmbooking"
					}]
				},
				{
					"blockSeq": 3,
					"blockName": "confirmbooking",
					"type": "input",
					"getVariables": ["city.cityName"],
					"inputMapping": {
						"data": "{date:dataPicker().date(),time:dataPicker().time()}",
						"channel": "cabbookchannel",
						"user": "Sidd"
					},
					"rules": [],
					"api": {
						"apiType": "POST",
						"endpoint": "/confirmBooking",
						"params": [{
							"key": "",
							"value": ""
						}],
						"dataMapping": {
							"city": "city.cityName",
							"date": "data[date]",
							"time": "time[time]"
						},
						"outputMapping": {
							"attachment": "",
							"status": "response.status",
							"confirmationId": "response.text[confirmationId]"
						}
					},
					"output": {
						"message": "Your Cab Booking is Confirmed,your Confirmation id:{confirmationId}",
						"messageType": "text",
						"attachemnt": "",
						"channel": "cabbookchannel",
						"user": "Sidd"
					},
					"setVariables": [{
						"entity": "date",
						"scope": "global",
						"variables": [{
								"variableName": "date",
								"value": "data[date]",
								"scope": "global"
							},
							{
								"variableName": "time",
								"value": "data[time]",
								"scope": "global"
							}
						]
					}],
					"next": [{
						"journeyName": "bookhotel",
						"blockName": ""
					}]
				}
			]
		}
	]
}